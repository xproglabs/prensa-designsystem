import {ArgsTable, Meta} from '@storybook/addon-docs/blocks';
import {ThemeProvider} from 'styled-components';
import {Space, CodeBlock} from 'prensa-docs';

import {theme} from 'storybook/theme';
import Field from './index';

<Meta title="Components/Field" />

# Field

<Space size={4} />

<pre>
  <CodeBlock>{`import {Field} from 'prensa'`}</CodeBlock>
</pre>

<Space size={6} />

O componente é composto por um `<label />`, `<input />` e uma mensagem de erro para validação de formulário. Ele aceita um ícone que é posicionado no interior do input, à direita.
As props do componente são dividas em props de ação (onChange, value etc) e props que preenchem o styled-system (props de estilização).

<Space size={6} />

### Estados e validação

O componente trabalha com dois estados, o **succeso** e o **erro**. O sucesso representa a visualização normal do field para o usuário. Já o erro representa um estado de valores inválidos.

<Space size={6} />

<ThemeProvider theme={theme}>
  <div style={{display: 'flex', width: '100%'}}>
    <div style={{width: 'calc(50% - 10px)', marginRight: 10}}>
      <Field label="Field com visualização normal" />
    </div>
    <div style={{width: 'calc(50% - 10px)', marginRight: 10}}>
      <Field label="Field com visualização do estado de erro" validationMessage='Aqui podemos inserir uma mensagem para o usuário' validation={false} />
    </div>
  </div>
</ThemeProvider>

<Space size={6} />

A manipulação desses estados é feita através das props `validation` e `validationMessage`. Para a primeira, `true | false` e para a segunda uma `string` com a mensagem que deseja exibir no Field.

<Space size={6} />

<pre>
  <CodeBlock children={`
  <Field label="Field com visualização normal" />
  <Field 
    label="Field com visualização do estado de erro"
    validationMessage='Aqui podemos inserir uma mensagem para o usuário'
    validation={false}
  />
  `}/>
</pre>

<Space size={10} />

### Aplicação de máscara

A aplicação da máscara é feita utilizando o pacote `react-input-mask`: https://www.npmjs.com/package/react-input-mask

A bundle do pacote já está mesclada ao componente Field. Para utilizar basta passar um valor em `string` para a prop `mask` com a regra da máscara desejada.

<ThemeProvider theme={theme}>
  <Field label="The quick brown fox" mask="999.999.999-99" />
</ThemeProvider>

<pre>
  <CodeBlock children={`<Field label="The quick brown fox" mask="999.999.999-99" />`} />
</pre>

<Space size={10} />

### Estilos e aplicação nas props

O componente é conectado ao styled-system do Prensa permitindo manipulações de estilo específicas.

Para isso utilizamos as props listadas abaixo:

> **`styledLabel`** e **`styledMessage`** recebem: `{fontSize, fontWeight, fontFamily, color, mt, mr, mb, ml}`

> **`styledInput`** recebe: `{fontSize, fontWeight, fontFamily, color, radius}`

> **`styledLabel`** recebe: `{mt, mr, mb, ml}`

A cor padrão definida para o erro é `theme.colors.error1`.

<ThemeProvider theme={theme}>
  <Field label="The quick brown fox" styledLabel={{ fontWeight: 700 }} />
</ThemeProvider>

<pre>
  <CodeBlock children={`<Field label="The quick brown fox" styledLabel={{ fontWeight: 700 }} />`} />
</pre>

<Space size={10} />

# API
<ArgsTable of={Field} />
